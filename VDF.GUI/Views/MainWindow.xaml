<Window
    x:Class="VDF.GUI.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Settings="clr-namespace:VDF.GUI.Data;assembly=VDF.GUI"
    xmlns:actipro="http://schemas.actiprosoftware.com/avaloniaui"
    xmlns:controls="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:datagrid="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
    xmlns:i="clr-namespace:Avalonia.Xaml.Interactivity;assembly=Avalonia.Xaml.Interactivity"
    xmlns:ia="clr-namespace:Avalonia.Xaml.Interactions.Core;assembly=Avalonia.Xaml.Interactions"
    xmlns:local="clr-namespace:VDF.GUI;assembly=VDF.GUI"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:media="clr-namespace:Avalonia.Media;assembly=Avalonia.Base"
    xmlns:mvvm="clr-namespace:VDF.GUI.Mvvm;assembly=VDF.GUI"
    xmlns:presenters="clr-namespace:Avalonia.Controls.Presenters;assembly=Avalonia.Controls"
    xmlns:tdg="using:Avalonia.Controls.Models.TreeDataGrid"
    xmlns:vm="clr-namespace:VDF.GUI.ViewModels;assembly=VDF.GUI"
    x:Name="MainWindow"
    Title="{Binding Source={x:Static local:App.Lang}, Path=[App.Title]}"
    Width="1020"
    Height="950"
    d:DesignHeight="750"
    d:DesignWidth="900"
    BorderBrush="{actipro:ThemeResource ButtonForegroundBrush}"
    BorderThickness="1"
    ExtendClientAreaToDecorationsHint="True"
    FontSize="14"
    Icon="/Assets/icon.ico"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Window.Resources>
        <mvvm:IsBestConverter x:Key="IsBestConverter" />
        <mvvm:ExtraShortDateTimeConverter x:Key="ExtraShortDateTimeConverter" />
    </Window.Resources>
    <Window.Styles>
        <Style Selector="Button.hyperlink">
            <Setter Property="Template">
                <ControlTemplate>
                    <TextBlock Text="{TemplateBinding Content}" TextDecorations="Underline">
                        <TextBlock.Styles>
                            <Style Selector="TextBlock:pointerover">
                                <Setter Property="Foreground" Value="{actipro:ThemeResource ControlBackgroundBrushEmphasizedAccent}" />
                            </Style>
                        </TextBlock.Styles>
                    </TextBlock>
                </ControlTemplate>
            </Setter>
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
        </Style>
    </Window.Styles>
    <Border BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}" BorderThickness="2">
        <Grid>
            <controls:ExperimentalAcrylicBorder
                x:Name="ExperimentalAcrylicBorderBackgroundWhite"
                IsHitTestVisible="False"
                IsVisible="False">
                <controls:ExperimentalAcrylicBorder.Material>
                    <media:ExperimentalAcrylicMaterial BackgroundSource="Digger" TintColor="White" />
                </controls:ExperimentalAcrylicBorder.Material>
            </controls:ExperimentalAcrylicBorder>
            <controls:ExperimentalAcrylicBorder
                x:Name="ExperimentalAcrylicBorderBackgroundBlack"
                IsHitTestVisible="False"
                IsVisible="False">
                <controls:ExperimentalAcrylicBorder.Material>
                    <media:ExperimentalAcrylicMaterial BackgroundSource="Digger" TintColor="Black" />
                </controls:ExperimentalAcrylicBorder.Material>
            </controls:ExperimentalAcrylicBorder>
            <TextBlock
                x:Name="TextBlockWindowTitle"
                Margin="0,4,0,0"
                HorizontalAlignment="Center"
                IsHitTestVisible="false"
                Text="{Binding #MainWindow.Title}" />
            <Grid Margin="2,30,2,2">
                <TabControl x:Name="TabControl">
                    <TabItem Name="TabItemScanner">
                        <TabItem.Header>
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="12"
                                Text="Scanner" />
                        </TabItem.Header>
                        <Grid Margin="0,0,0,10" RowDefinitions="Auto, *, Auto, Auto">
                            <Menu Grid.Row="0" MinHeight="30">
                                <MenuItem
                                    Command="{Binding StartScanCommand}"
                                    CommandParameter="FullScan"
                                    IsVisible="{Binding !IsScanning}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="24" Height="24">
                                                    <Path Data="M8,5.14V19.14L19,12.14L8,5.14Z" Fill="Green" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Scan" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem
                                    Command="{Binding StartScanCommand}"
                                    CommandParameter="CompareOnly"
                                    IsEnabled="{Binding IsReadyToCompare}"
                                    IsVisible="{Binding !IsScanning}"
                                    ToolTip.Tip="Re-run the scan but without enumerating and gathering file informations. Changing certain settings will only take effect during a full scan.">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="24" Height="24">
                                                    <Path Data="m19.3809,4.64738l-1.69658,1.69658c-3.12529,-3.12529 -8.21505,-3.12529 -11.34034,0c-3.12529,3.12529 -3.12529,8.21505 0,11.34034c1.518,1.60729 3.57176,2.41094 5.62553,2.41094s4.10753,-0.80365 5.71483,-2.32165c0.71435,-0.71435 0.71435,-1.78588 0,-2.50024s-1.78588,-0.71435 -2.50024,0c-1.69658,1.78588 -4.554,1.69658 -6.33988,0c-0.89294,-0.89294 -1.33941,-2.05376 -1.33941,-3.21459s0.44647,-2.32165 1.33941,-3.12529c1.69658,-1.78588 4.554,-1.78588 6.33988,0l-1.60729,1.60729c-0.53577,0.53577 -0.17859,1.518 0.62505,1.518l5.80411,0c0.53577,0 0.89294,-0.35717 0.89294,-0.89294l0,-5.89341c0,-0.80365 -0.98224,-1.16083 -1.518,-0.62505l-0.00001,0.00001l0.00001,-0.00001z" Fill="Orange" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Rescan" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Command="{Binding ResumeScanCommand}" IsVisible="{Binding IsScanning}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="16" Height="16">
                                                <Canvas Width="24" Height="24">
                                                    <Path Data="M8,5.14V19.14L19,12.14L8,5.14Z" Fill="Green" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Resume" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>

                                <MenuItem Command="{Binding PauseScanCommand}" IsVisible="{Binding IsScanning}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="16" Height="16">
                                                <Canvas Width="24" Height="24">
                                                    <Path Data="M14,19H18V5H14M6,19H10V5H6V19Z" Fill="Gold" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Pause" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Command="{Binding StopScanCommand}" IsVisible="{Binding IsScanning}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="16" Height="16">
                                                <Canvas Width="24" Height="24">
                                                    <Path Data="M18,18H6V6H18V18Z" Fill="Red" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Stop" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem IsVisible="{Binding !IsScanning}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Database" />
                                            <Path
                                                Margin="4,2,0,0"
                                                VerticalAlignment="Center"
                                                Data="M 0 0 L 6 6 L 12 0 Z"
                                                Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                    <MenuItem Command="{Binding CleanDatabaseCommand}" ToolTip.Tip="Removes entries which file no longer exists or which failed on ffmpeg/ffprobe">
                                        <MenuItem.Header>
                                            <StackPanel Orientation="Horizontal">
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Data="M19.36,2.72L20.78,4.14L15.06,9.85C16.13,11.39 16.28,13.24 15.38,14.44L9.06,8.12C10.26,7.22 12.11,7.37 13.65,8.44L19.36,2.72M5.93,17.57C3.92,15.56 2.69,13.16 2.35,10.92L7.23,8.83L14.67,16.27L12.58,21.15C10.34,20.81 7.94,19.58 5.93,17.57Z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                    </Canvas>
                                                </Viewbox>
                                                <TextBlock
                                                    Margin="5,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Text="Cleanup Database" />
                                            </StackPanel>
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <MenuItem Command="{Binding EditDataBaseCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Edit..." />
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <Separator />
                                    <MenuItem Command="{Binding ExportDataBaseToJsonCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Export To Json" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <MenuItem Command="{Binding ExportDataBaseToJsonPrettyCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Export To Json (pretty)" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <Separator />
                                    <MenuItem Command="{Binding ImportDataBaseFromJsonCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Import From Json" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <Separator />
                                    <MenuItem Command="{Binding ClearDatabaseCommand}">
                                        <MenuItem.Header>
                                            <StackPanel Orientation="Horizontal">
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Data="M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z" Fill="Red" />
                                                    </Canvas>
                                                </Viewbox>
                                                <TextBlock
                                                    Margin="5,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Text="Clear Database" />
                                            </StackPanel>
                                        </MenuItem.Header>
                                    </MenuItem>
                                </MenuItem>
                                <MenuItem Command="{Binding LatestReleaseCommand}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="16" Height="16">
                                                <Canvas Width="64" Height="64">
                                                    <Path Data="M32.029,8.345c-13.27,0 -24.029,10.759 -24.029,24.033c0,10.617 6.885,19.624 16.435,22.803c1.202,0.22 1.64,-0.522 1.64,-1.16c0,-0.569 -0.02,-2.081 -0.032,-4.086c-6.685,1.452 -8.095,-3.222 -8.095,-3.222c-1.093,-2.775 -2.669,-3.514 -2.669,-3.514c-2.182,-1.492 0.165,-1.462 0.165,-1.462c2.412,0.171 3.681,2.477 3.681,2.477c2.144,3.672 5.625,2.611 6.994,1.997c0.219,-1.553 0.838,-2.612 1.526,-3.213c-5.336,-0.606 -10.947,-2.669 -10.947,-11.877c0,-2.623 0.937,-4.769 2.474,-6.449c-0.247,-0.608 -1.072,-3.051 0.235,-6.36c0,0 2.018,-0.646 6.609,2.464c1.917,-0.533 3.973,-0.8 6.016,-0.809c2.041,0.009 4.097,0.276 6.017,0.809c4.588,-3.11 6.602,-2.464 6.602,-2.464c1.311,3.309 0.486,5.752 0.239,6.36c1.54,1.68 2.471,3.826 2.471,6.449c0,9.232 -5.62,11.263 -10.974,11.858c0.864,0.742 1.632,2.208 1.632,4.451c0,3.212 -0.029,5.804 -0.029,6.591c0,0.644 0.432,1.392 1.652,1.157c9.542,-3.185 16.421,-12.186 16.421,-22.8c0,-13.274 -10.76,-24.033 -24.034,-24.033" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Latest Release" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Command="{Binding OpenOwnFolderCommand}" IsVisible="{Binding IsDebug}">
                                    <MenuItem.Header>
                                        <TextBlock
                                            Margin="5,0,0,0"
                                            VerticalAlignment="Center"
                                            Text="Open Folder" />
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem IsVisible="{Binding !!Duplicates.Count}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Path
                                                Margin="0,0,4,0"
                                                VerticalAlignment="Center"
                                                Data="M14,9.00421 C14.5523,9.00421 15,9.45192 15,10.00418 L15,13.00418 C15,14.10878 14.1046,15.00418 13,15.00418 L3,15.00418 C1.89543,15.00418 1,14.10878 1,13.00418 L1,10.00418 C1,9.45192 1.44772,9.00421 2,9.00421 C2.55228,9.00421 3,9.45192 3,10.00418 L3,13.00418 L13,13.00418 L13,10.00418 C13,9.45192 13.4477,9.00421 14,9.00421 Z M8,1.59 L11.7071,5.2971 C12.0976,5.68763 12.0976,6.32079 11.7071,6.71132 C11.3166,7.10184 10.6834,7.10184 10.2929,6.71132 L9,5.41842 L9,10.00418 C9,10.55648 8.55228,11.00418 8,11.00418 C7.44772,11.00418 7,10.55648 7,10.00418 L7,5.41842 L5.70711,6.71132 C5.31658,7.10184 4.68342,7.10184 4.29289,6.71132 C3.90237,6.32079 3.90237,5.68763 4.29289,5.2971 L8,1.59 Z"
                                                Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Export Scan Results" />
                                            <Path
                                                Margin="4,2,0,0"
                                                VerticalAlignment="Center"
                                                Data="M 0 0 L 6 6 L 12 0 Z"
                                                Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                    <MenuItem Command="{Binding ExportScanResultsCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="To Json" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <MenuItem Command="{Binding ExportScanResultsPrettyCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="To Json (pretty)" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                    <Separator />
                                    <MenuItem Command="{Binding ExportScanResultsToFileCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="To File including thumbnails" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                </MenuItem>
                                <MenuItem IsVisible="{Binding !!Duplicates.Count}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Path
                                                Margin="0,0,4,0"
                                                VerticalAlignment="Center"
                                                Data="M14,9 C14.5523,9 15,9.44772 15,10 L15,13 C15,14.1046 14.1046,15 13,15 L3,15 C1.89543,15 1,14.1046 1,13 L1,10 C1,9.44772 1.44772,9 2,9 C2.55228,9 3,9.44771 3,10 L3,13 L13,13 L13,10 C13,9.44771 13.4477,9 14,9 Z M8,1 C8.55228,1 9,1.44772 9,2 L9,6.58579 L10.2929,5.29289 C10.6834,4.90237 11.3166,4.90237 11.7071,5.29289 C12.0976,5.68342 12.0976,6.31658 11.7071,6.70711 L8,10.4142 L4.29289,6.70711 C3.90237,6.31658 3.90237,5.68342 4.29289,5.29289 C4.68342,4.90237 5.31658,4.90237 5.70711,5.29289 L7,6.58579 L7,2 C7,1.44772 7.44772,1 8,1 Z"
                                                Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Import Scan Results" />
                                            <Path
                                                Margin="4,2,0,0"
                                                VerticalAlignment="Center"
                                                Data="M 0 0 L 6 6 L 12 0 Z"
                                                Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                    <MenuItem Command="{Binding ImportScanResultsFromFileCommand}">
                                        <MenuItem.Header>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="From File including thumbnails" />
                                        </MenuItem.Header>
                                    </MenuItem>
                                </MenuItem>
                            </Menu>
                            <Grid Grid.Row="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Menu Grid.Row="0" MinHeight="30">
                                    <Menu.Styles>
                                        <Style Selector="Separator">
                                            <Setter Property="Margin" Value="0,5,0,5" />
                                            <Setter Property="Width" Value="1" />
                                        </Style>
                                    </Menu.Styles>
                                    <MenuItem>
                                        <MenuItem.Header>
                                            <StackPanel Orientation="Horizontal">
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Data="M2,4C2,2.89 2.9,2 4,2H7V4H4V7H2V4M22,4V7H20V4H17V2H20A2,2 0 0,1 22,4M20,20V17H22V20C22,21.11 21.1,22 20,22H17V20H20M2,20V17H4V20H7V22H4A2,2 0 0,1 2,20M10,2H14V4H10V2M10,20H14V22H10V20M20,10H22V14H20V10M2,10H4V14H2V10Z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                    </Canvas>
                                                </Viewbox>
                                                <TextBlock
                                                    Margin="5,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Text="Selection" />
                                                <Path
                                                    Margin="4,2,0,0"
                                                    VerticalAlignment="Center"
                                                    Data="M 0 0 L 6 6 L 12 0 Z"
                                                    Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                            </StackPanel>
                                        </MenuItem.Header>
                                        <MenuItem Command="{Binding CheckWhenIdenticalCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Select 100% Identical (Keep First)" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Command="{Binding CheckWhenIdenticalButSizeCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Select 100% Identical Except Size (Keep Smallest)" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Command="{Binding CheckLowestQualityCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Select Lowest Quality" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Header="Date">
                                            <MenuItem Command="{Binding CheckOldestCommand}">
                                                <MenuItem.Header>
                                                    <TextBlock VerticalAlignment="Center" Text="Select Oldest" />
                                                </MenuItem.Header>
                                            </MenuItem>
                                            <MenuItem Command="{Binding CheckNewestCommand}">
                                                <MenuItem.Header>
                                                    <TextBlock VerticalAlignment="Center" Text="Select Newest" />
                                                </MenuItem.Header>
                                            </MenuItem>
                                        </MenuItem>
                                        <MenuItem>
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Select Custom" />
                                            </MenuItem.Header>
                                            <MenuItem Command="{Binding CheckCustomCommand}">
                                                <MenuItem.Header>
                                                    <TextBlock VerticalAlignment="Center" Text="Expression Builder" />
                                                </MenuItem.Header>
                                            </MenuItem>
                                            <MenuItem Command="{Binding OpenCustomSelectionCommand}">
                                                <MenuItem.Header>
                                                    <TextBlock VerticalAlignment="Center" Text="Custom Selection" />
                                                </MenuItem.Header>
                                            </MenuItem>
                                        </MenuItem>
                                        <MenuItem Command="{Binding ClearSelectionCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Clear Selection" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                    </MenuItem>
                                    <MenuItem>
                                        <MenuItem.Header>
                                            <StackPanel Orientation="Horizontal">
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                    </Canvas>
                                                </Viewbox>
                                                <TextBlock
                                                    Margin="5,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Text="Delete Selection" />
                                                <Path
                                                    Margin="4,2,0,0"
                                                    VerticalAlignment="Center"
                                                    Data="M 0 0 L 6 6 L 12 0 Z"
                                                    Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                            </StackPanel>
                                        </MenuItem.Header>
                                        <MenuItem Command="{Binding DeleteSelectionCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Delete from disk (Shift+Delete)" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Command="{Binding DeleteSelectionPermanentlyCommand}" IsVisible="{Binding IsWindows}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Delete permanently from disk" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Header="-" />

                                        <MenuItem Command="{Binding RemoveSelectionFromListCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="From List (Keep Files)" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Command="{Binding CopySelectionCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Copy To Folder (Keep Files)" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                        <MenuItem Command="{Binding MoveSelectionCommand}">
                                            <MenuItem.Header>
                                                <TextBlock VerticalAlignment="Center" Text="Move To Folder" />
                                            </MenuItem.Header>
                                        </MenuItem>
                                    </MenuItem>
                                    <MenuItem Header="|" />
                                    <CheckBox Margin="5,0,0,0" IsChecked="{Binding ElementName=GridFilter, Path=IsVisible}">
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox
                                                Width="16"
                                                Height="16"
                                                Focusable="False">
                                                <Canvas
                                                    Width="24"
                                                    Height="24"
                                                    Focusable="False">
                                                    <Path
                                                        Data="M10,13V11H18V13H10M10,19V17H14V19H10M10,7V5H22V7H10M6,17H8.5L5,20.5L1.5,17H4V7H1.5L5,3.5L8.5,7H6V17Z"
                                                        Fill="{actipro:ThemeResource ButtonForegroundBrush}"
                                                        Focusable="False" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Filter / Sort" />
                                        </StackPanel>
                                    </CheckBox>
                                </Menu>
                                <Grid
                                    x:Name="GridFilter"
                                    Grid.Row="1"
                                    Margin="5"
                                    IsVisible="False"
                                    RowDefinitions="*, Auto">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock VerticalAlignment="Center" Text="Path:" />
                                        <TextBox
                                            MinWidth="150"
                                            Margin="5,0,0,0"
                                            Text="{Binding FilterByPath}"
                                            ToolTip.Tip="Note: if only one item of a group is matching, all group items will be shown" />
                                        <TextBlock
                                            Margin="5,0,0,0"
                                            VerticalAlignment="Center"
                                            Text="Sort:" />
                                        <ComboBox
                                            MinWidth="150"
                                            Margin="5,0,0,0"
                                            ItemsSource="{Binding SortOrders}"
                                            SelectedItem="{Binding SortOrder}">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Key}" />
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>
                                        <TextBlock
                                            Margin="5,0,0,0"
                                            VerticalAlignment="Center"
                                            Text="Type:" />
                                        <ComboBox
                                            MinWidth="150"
                                            Margin="5,0,0,0"
                                            ItemsSource="{Binding TypeFilters}"
                                            SelectedItem="{Binding FileType}">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Key}" />
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>
                                        <TextBlock
                                            Margin="5,0,0,0"
                                            VerticalAlignment="Center"
                                            Text="Similarity:" />
                                        <NumericUpDown
                                            Width="140"
                                            FormatString="\{0\}%"
                                            Maximum="100"
                                            Minimum="0"
                                            Value="{Binding FilterSimilarityFrom}" />
                                        <TextBlock
                                            Margin="5,0"
                                            VerticalAlignment="Center"
                                            Text="to" />
                                        <NumericUpDown
                                            Width="140"
                                            FormatString="\{0\}%"
                                            Maximum="100"
                                            Minimum="0"
                                            Value="{Binding FilterSimilarityTo}" />
                                    </StackPanel>
                                    <StackPanel
                                        Grid.Row="1"
                                        Margin="0,10"
                                        HorizontalAlignment="Center"
                                        Orientation="Horizontal">
                                        <Image Width="16" Height="16">
                                            <Image.Resources>
                                                <SolidColorBrush x:Key="Brush0" Color="#FFFFCE31" />
                                                <SolidColorBrush x:Key="Brush1" Color="#FF231F20" />
                                            </Image.Resources>
                                            <Image.Source>
                                                <DrawingImage>
                                                    <DrawingImage.Drawing>
                                                        <DrawingGroup>
                                                            <DrawingGroup>
                                                                <DrawingGroup.Transform>
                                                                    <MatrixTransform Matrix="12.5,0,0,12.5,0,0" />
                                                                </DrawingGroup.Transform>
                                                                <GeometryDrawing Brush="{DynamicResource Brush0}" Geometry="F1 M5.9 62C2.6 62 1.1 59.6 2.6 56.7L29.3 4.2C30.8 1.3 33.2 1.3 34.7 4.2L61.4 56.7C62.9 59.6 61.4 62 58.1 62L5.9 62Z" />
                                                                <GeometryDrawing Brush="{DynamicResource Brush1}" Geometry="F1 M27.8 23.6L30.6 42.1C30.9 43.9 33.2 43.9 33.5 42.1L36.2 23.6C36.7 16.4 27.3 16.4 27.8 23.6" />
                                                                <GeometryDrawing Brush="{DynamicResource Brush1}" Geometry="F1 M36.2 49.6Q36.2 49.7031 36.1949 49.8061Q36.1899 49.9091 36.1798 50.0117Q36.1697 50.1143 36.1545 50.2163Q36.1394 50.3183 36.1193 50.4194Q36.0992 50.5205 36.0741 50.6205Q36.0491 50.7205 36.0191 50.8192Q35.9892 50.9179 35.9545 51.0149Q35.9197 51.112 35.8803 51.2073Q35.8408 51.3025 35.7968 51.3957Q35.7527 51.4889 35.7041 51.5799Q35.6555 51.6708 35.6025 51.7592Q35.5494 51.8477 35.4922 51.9334Q35.4349 52.0191 35.3735 52.1019Q35.312 52.1847 35.2466 52.2644Q35.1812 52.3441 35.112 52.4205Q35.0427 52.4969 34.9698 52.5698Q34.8969 52.6427 34.8205 52.712Q34.7442 52.7812 34.6645 52.8466Q34.5847 52.912 34.5019 52.9735Q34.4191 53.0349 34.3334 53.0922Q34.2477 53.1494 34.1592 53.2025Q34.0708 53.2555 33.9799 53.3041Q33.8889 53.3527 33.7957 53.3968Q33.7025 53.4408 33.6073 53.4803Q33.512 53.5197 33.4149 53.5545Q33.3179 53.5892 33.2192 53.6191Q33.1205 53.6491 33.0205 53.6741Q32.9205 53.6992 32.8194 53.7193Q32.7183 53.7394 32.6163 53.7545Q32.5143 53.7697 32.4117 53.7798Q32.3091 53.7899 32.2061 53.7949Q32.1031 53.8 32 53.8Q31.8969 53.8 31.7939 53.7949Q31.6909 53.7899 31.5883 53.7798Q31.4857 53.7697 31.3837 53.7545Q31.2817 53.7394 31.1806 53.7193Q31.0795 53.6992 30.9795 53.6741Q30.8795 53.6491 30.7808 53.6191Q30.6821 53.5892 30.5851 53.5545Q30.488 53.5197 30.3927 53.4803Q30.2975 53.4408 30.2043 53.3968Q30.1111 53.3527 30.0201 53.3041Q29.9292 53.2555 29.8408 53.2025Q29.7523 53.1494 29.6666 53.0922Q29.5809 53.0349 29.4981 52.9735Q29.4152 52.912 29.3355 52.8466Q29.2558 52.7812 29.1795 52.712Q29.1031 52.6427 29.0302 52.5698Q28.9572 52.4969 28.888 52.4205Q28.8188 52.3441 28.7534 52.2644Q28.6879 52.1847 28.6265 52.1019Q28.5651 52.0191 28.5078 51.9334Q28.4505 51.8477 28.3975 51.7592Q28.3445 51.6708 28.2959 51.5799Q28.2473 51.4889 28.2032 51.3957Q28.1592 51.3025 28.1197 51.2073Q28.0802 51.112 28.0455 51.0149Q28.0108 50.9179 27.9808 50.8192Q27.9509 50.7205 27.9259 50.6205Q27.9008 50.5205 27.8807 50.4194Q27.8606 50.3182 27.8455 50.2163Q27.8303 50.1143 27.8202 50.0117Q27.8101 49.9091 27.8051 49.8061Q27.8 49.7031 27.8 49.6Q27.8 49.4969 27.8051 49.3939Q27.8101 49.2909 27.8202 49.1883Q27.8303 49.0857 27.8455 48.9837Q27.8606 48.8817 27.8807 48.7806Q27.9008 48.6795 27.9259 48.5795Q27.9509 48.4795 27.9808 48.3808Q28.0108 48.2821 28.0455 48.1851Q28.0802 48.088 28.1197 47.9927Q28.1592 47.8975 28.2032 47.8043Q28.2473 47.7111 28.2959 47.6201Q28.3445 47.5292 28.3975 47.4408Q28.4505 47.3523 28.5078 47.2666Q28.5651 47.1809 28.6265 47.0981Q28.6879 47.0152 28.7534 46.9355Q28.8188 46.8558 28.888 46.7794Q28.9572 46.7031 29.0301 46.6301Q29.1031 46.5572 29.1794 46.488Q29.2558 46.4188 29.3355 46.3534Q29.4152 46.2879 29.4981 46.2265Q29.5809 46.1651 29.6666 46.1078Q29.7523 46.0505 29.8408 45.9975Q29.9292 45.9445 30.0201 45.8959Q30.1111 45.8473 30.2043 45.8032Q30.2975 45.7591 30.3927 45.7197Q30.488 45.6802 30.5851 45.6455Q30.6821 45.6108 30.7808 45.5808Q30.8795 45.5509 30.9795 45.5259Q31.0795 45.5008 31.1806 45.4807Q31.2817 45.4606 31.3837 45.4455Q31.4857 45.4303 31.5883 45.4202Q31.6909 45.4101 31.7939 45.4051Q31.8969 45.4 32 45.4Q32.1031 45.4 32.2061 45.4051Q32.3091 45.4101 32.4117 45.4202Q32.5143 45.4303 32.6163 45.4455Q32.7183 45.4606 32.8194 45.4807Q32.9205 45.5008 33.0205 45.5259Q33.1205 45.5509 33.2192 45.5808Q33.3179 45.6108 33.4149 45.6455Q33.512 45.6802 33.6073 45.7197Q33.7025 45.7591 33.7957 45.8032Q33.8889 45.8473 33.9799 45.8959Q34.0708 45.9445 34.1592 45.9975Q34.2477 46.0505 34.3334 46.1078Q34.4191 46.1651 34.5019 46.2265Q34.5847 46.2879 34.6645 46.3534Q34.7442 46.4188 34.8205 46.488Q34.8969 46.5572 34.9698 46.6301Q35.0427 46.7031 35.112 46.7794Q35.1812 46.8558 35.2466 46.9355Q35.312 47.0152 35.3735 47.0981Q35.4349 47.1809 35.4922 47.2666Q35.5494 47.3523 35.6025 47.4408Q35.6555 47.5292 35.7041 47.6201Q35.7527 47.7111 35.7967 47.8043Q35.8408 47.8975 35.8803 47.9927Q35.9197 48.088 35.9545 48.1851Q35.9892 48.2821 36.0191 48.3808Q36.0491 48.4795 36.0741 48.5795Q36.0992 48.6795 36.1193 48.7806Q36.1394 48.8817 36.1545 48.9837Q36.1697 49.0857 36.1798 49.1883Q36.1899 49.2909 36.1949 49.3939Q36.2 49.4969 36.2 49.6Z" />
                                                            </DrawingGroup>
                                                        </DrawingGroup>
                                                    </DrawingImage.Drawing>
                                                </DrawingImage>
                                            </Image.Source>
                                        </Image>
                                        <TextBlock
                                            Margin="10,0"
                                            VerticalAlignment="Center"
                                            FontWeight="Bold"
                                            Foreground="Yellow"
                                            Text="Note: Any action (select, delete etc) will only apply on filtered duplicates" />
                                    </StackPanel>
                                </Grid>
                                <Grid Grid.Row="2">
                                    <TreeDataGrid
                                        x:Name="treeGrouping"
                                        MaxWidth="{Binding $parent[Window].Bounds.Width}"
                                        CanUserResizeColumns="True"
                                        IsVisible="{Binding ShowTreeDataGrid}"
                                        Source="{Binding TreeSource}">
                                        <TreeDataGrid.KeyBindings>
                                            <KeyBinding Command="{Binding RenameFileCommand}" Gesture="F2" />
                                            <KeyBinding Command="{Binding ToggleCheckboxCommand}" Gesture="Space" />
                                            <KeyBinding Command="{Binding DeleteSelectionWithPromptCommand}" Gesture="Delete" />
                                            <KeyBinding Command="{Binding DeleteSelectionCommand}" Gesture="Shift+Delete" />
                                            <KeyBinding Command="{Binding DeleteHighlightedCommand}" Gesture="Control+Delete" />
                                            <KeyBinding Command="{Binding ShowGroupInThumbnailComparerCommand}" Gesture="Alt+C" />
                                        </TreeDataGrid.KeyBindings>
                                        <TreeDataGrid.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Command="{Binding OpenItemInFolderCommand}" Header="Open In Folder" />
                                                <MenuItem
                                                    Command="{Binding RenameFileCommand}"
                                                    Header="Rename File"
                                                    InputGesture="F2" />
                                                <MenuItem>
                                                    <MenuItem.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Viewbox Width="16" Height="16">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Data="M2,4C2,2.89 2.9,2 4,2H7V4H4V7H2V4M22,4V7H20V4H17V2H20A2,2 0 0,1 22,4M20,20V17H22V20C22,21.11 21.1,22 20,22H17V20H20M2,20V17H4V20H7V22H4A2,2 0 0,1 2,20M10,2H14V4H10V2M10,20H14V22H10V20M20,10H22V14H20V10M2,10H4V14H2V10Z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                                </Canvas>
                                                            </Viewbox>
                                                            <TextBlock
                                                                Margin="5,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="Selected Items" />
                                                        </StackPanel>
                                                    </MenuItem.Header>
                                                    <MenuItem Command="{Binding DeleteSelectionCommand}" InputGesture="Shift+Delete">
                                                        <MenuItem.Header>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Viewbox Width="16" Height="16">
                                                                    <Canvas Width="24" Height="24">
                                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                                    </Canvas>
                                                                </Viewbox>
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Delete from disk (to recycle bin if possible)" />
                                                            </StackPanel>
                                                        </MenuItem.Header>
                                                    </MenuItem>
                                                    <MenuItem Command="{Binding DeleteSelectionPermanentlyCommand}" IsVisible="{Binding IsWindows}">
                                                        <MenuItem.Header>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Viewbox Width="16" Height="16">
                                                                    <Canvas Width="24" Height="24">
                                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                                    </Canvas>
                                                                </Viewbox>
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Delete permanently from disk" />
                                                            </StackPanel>
                                                        </MenuItem.Header>
                                                    </MenuItem>
                                                    <Separator />
                                                    <MenuItem Command="{Binding RemoveSelectionFromListCommand}" InputGesture="Delete">
                                                        <MenuItem.Header>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Viewbox Width="16" Height="16">
                                                                    <Canvas Width="24" Height="24">
                                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                                    </Canvas>
                                                                </Viewbox>
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Remove from list only" />
                                                            </StackPanel>
                                                        </MenuItem.Header>
                                                    </MenuItem>
                                                    <MenuItem Command="{Binding RemoveSelectionFromListAndBlacklistCommand}">
                                                        <MenuItem.Header>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Viewbox Width="16" Height="16">
                                                                    <Canvas Width="24" Height="24">
                                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                                    </Canvas>
                                                                </Viewbox>
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Remove from list only and exclude from future scans" />
                                                            </StackPanel>
                                                        </MenuItem.Header>
                                                    </MenuItem>
                                                    <MenuItem Command="{Binding CreateSymbolLinksForSelectedItemsCommand}" ToolTip.Tip="Links all selected items to the first unselected item in each group.">
                                                        <MenuItem.Header>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Viewbox Width="16" Height="16">
                                                                    <Canvas Width="24" Height="24">
                                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                                    </Canvas>
                                                                </Viewbox>
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Remove from list only + create symbol links" />
                                                            </StackPanel>
                                                        </MenuItem.Header>
                                                    </MenuItem>
                                                    <MenuItem Command="{Binding CreateSymbolLinksForSelectedItemsAndBlacklistCommand}" ToolTip.Tip="Links all selected items to the first unselected item in each group.">
                                                        <MenuItem.Header>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Viewbox Width="16" Height="16">
                                                                    <Canvas Width="24" Height="24">
                                                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" Fill="Red" />
                                                                    </Canvas>
                                                                </Viewbox>
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Remove from list only + create symbol links + exclude" />
                                                            </StackPanel>
                                                        </MenuItem.Header>
                                                    </MenuItem>
                                                    <Separator />
                                                    <MenuItem Command="{Binding CopySelectionCommand}" Header="Copy To Folder..." />
                                                    <MenuItem Command="{Binding MoveSelectionCommand}" Header="Move To Folder..." />
                                                    <Separator />
                                                    <MenuItem
                                                        Command="{Binding ShowGroupInThumbnailComparerCommand}"
                                                        Header="Compare Fullsize Thumbnails"
                                                        InputGesture="Alt+C" />
                                                </MenuItem>
                                                <MenuItem>
                                                    <MenuItem.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Viewbox Width="16" Height="16">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Data="M23 15H11.707l2.646 2.646-.707.707L9.793 14.5l3.854-3.854.707.707L11.707 14H23zm-13-5H6v1h4zm-4 5h2v-1H6zM3 4h3V3h3a2 2 0 0 1 4 0h3v1h3v9h-1V5h-2v2H6V5H4v16h14v-5h1v6H3zm4 2h8V4h-3V2.615A.615.615 0 0 0 11.386 2h-.771a.615.615 0 0 0-.615.615V4H7zM6 19h4v-1H6z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                                </Canvas>
                                                            </Viewbox>
                                                            <TextBlock
                                                                Margin="5,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="Copy" />
                                                        </StackPanel>
                                                    </MenuItem.Header>
                                                    <MenuItem Command="{Binding CopyPathsToClipboardCommand}" Header="Copy path(s) to clipboard" />
                                                    <MenuItem Command="{Binding CopyFilenamesToClipboardCommand}" Header="Copy filename(s) to clipboard" />
                                                </MenuItem>
                                                <MenuItem Header="Groups">
                                                    <MenuItem Command="{Binding ExpandAllGroupsCommand}" Header="Expand all" />
                                                    <MenuItem Command="{Binding CollapseAllGroupsCommand}" Header="Collapse all" />
                                                </MenuItem>
                                                <MenuItem Header="Selected Group">
                                                    <MenuItem
                                                        Command="{Binding MarkGroupAsNotAMatchCommand}"
                                                        Header="Mark as 'Not a match'"
                                                        ToolTip.Tip="Hides this group and exclude it from future scans, except when there is a new duplicate." />
                                                    <MenuItem
                                                        Command="{Binding OpenGroupCommand}"
                                                        CommandParameter="0"
                                                        Header="Open Group"
                                                        IsVisible="{Binding IsMultiOpenSupported}" />
                                                    <MenuItem
                                                        Command="{Binding OpenGroupCommand}"
                                                        CommandParameter="1"
                                                        Header="Open Group In Folder"
                                                        IsVisible="{Binding IsMultiOpenInFolderSupported}" />
                                                    <MenuItem
                                                        Command="{Binding ShowGroupInThumbnailComparerCommand}"
                                                        Header="Compare Fullsize Thumbnails"
                                                        InputGesture="Alt+C" />
                                                </MenuItem>
                                            </ContextMenu>
                                        </TreeDataGrid.ContextMenu>
                                    </TreeDataGrid>
                                    <Border
                                        x:Name="EmptyOverlay"
                                        Background="Transparent"
                                        IsVisible="{Binding !ShowTreeDataGrid}">
                                        <StackPanel
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Spacing="6">
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                FontSize="18"
                                                IsVisible="{Binding !IsScanning}"
                                                Opacity="0.9"
                                                Text="Please start your first scan" />
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                IsVisible="{Binding !IsScanning}"
                                                Opacity="0.65"
                                                Text="Click Scan in the toolbar to begin." />
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </Grid>
                            <Grid
                                Grid.Row="2"
                                IsVisible="{Binding !Duplicates.Count}"
                                RowDefinitions="Auto, Auto">
                                <StackPanel
                                    Grid.Row="0"
                                    MinHeight="20"
                                    Orientation="Horizontal">
                                    <TextBlock Text="{Binding DuplicatesSelectedCounter, Mode=OneWay, StringFormat=Total Selected Duplicates: \{0\}}" />
                                </StackPanel>
                                <StackPanel
                                    Grid.Row="1"
                                    MinHeight="20"
                                    Orientation="Horizontal">
                                    <TextBlock Text="{Binding #dataGridGrouping.Items.Count, Mode=OneWay, StringFormat=Visible Duplicates: \{0\}}" />
                                    <Separator
                                        Width="1"
                                        Margin="5"
                                        Background="{actipro:ThemeResource StatusBarBorderBrush}" />
                                    <TextBlock Text="{Binding TotalDuplicates, Mode=OneWay, StringFormat=Total Duplicates: \{0\}}" />
                                    <Separator
                                        Width="1"
                                        Margin="5"
                                        Background="{actipro:ThemeResource StatusBarBorderBrush}" />
                                    <TextBlock Text="{Binding TotalDuplicateGroups, Mode=OneWay, StringFormat=Total Duplicate Groups: \{0\}}" />
                                    <Separator
                                        Width="1"
                                        Margin="5"
                                        Background="{actipro:ThemeResource StatusBarBorderBrush}" />
                                    <TextBlock Text="{Binding TotalDuplicatesSize, Mode=OneWay, StringFormat=Total Size: \{0\}}" />
                                    <Separator
                                        Width="1"
                                        Margin="5"
                                        Background="{actipro:ThemeResource StatusBarBorderBrush}" />
                                    <TextBlock Text="{Binding TotalSizeRemoved, Mode=OneWay, StringFormat=Total Size Removed: \{0\}}" />
                                </StackPanel>
                            </Grid>
                            <Grid Grid.Row="3">
                                <StackPanel MinHeight="20" Orientation="Horizontal">
                                    <ProgressBar
                                        Name="PbScanProgress"
                                        MinWidth="100"
                                        Maximum="{Binding ScanProgressMaxValue, Mode=OneWay}"
                                        Value="{Binding ScanProgressValue, Mode=OneWay}" />
                                    <Separator Width="1" Margin="5" />
                                    <TextBlock Text="{Binding TimeElapsed, Mode=OneWay, StringFormat=Elapsed time: {0:c}}" />
                                    <Separator Width="1" Margin="5" />
                                    <TextBlock Text="{Binding RemainingTime, Mode=OneWay, StringFormat=Remaining time: ~{0:c}}" />
                                    <Separator Width="1" Margin="5" />
                                    <TextBlock Text="{Binding ScanProgressText, Mode=OneWay} TextTrimming=CharacterEllipsis" />
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </TabItem>
                    <TabItem Name="TabItemSettings">
                        <TabItem.Header>
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="12"
                                Text="Settings" />
                        </TabItem.Header>
                        <Grid Margin="0,0,0,10" RowDefinitions="Auto, *">
                            <Menu Grid.Row="0" MinHeight="30">
                                <MenuItem Command="{Binding SaveSettingsCommand}" ToolTip.Tip="Note: Settings are automatically saved on normal exit">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="24" Height="24">
                                                    <Path Data="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Save" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Command="{Binding SaveSettingsProfileCommand}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="16" Height="16">
                                                    <Path Data="M11.04 1.33L12.71 3l.29.71v.33h-.5l-.5.5v-.83l-1.67-1.67H10v4H4v-4H2v10h3l-.5 1H2l-1-1v-10l1-1h8.33l.71.29zM7 5h2V2H7v3zm6.5 0L15 6.5l-.02.69-5.5 5.5-.13.12-.37.37-.1.09-3 1.5-.67-.67 1.5-3 .09-.1.37-.37.12-.13 5.5-5.5h.71zm-6.22 7.24l-.52 1 1.04-.48-.52-.52zm.69-1.03l.79.79 5.15-5.15-.79-.79-5.15 5.15z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Save To File" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Command="{Binding LoadSettingsProfileCommand}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="16" Height="16">
                                                    <Path Data="M1.5 14h11l.48-.37 2.63-7-.48-.63H14V3.5l-.5-.5H7.71l-.86-.85L6.5 2h-5l-.5.5v11l.5.5zM2 3h4.29l.86.85.35.15H13v2H8.5l-.35.15-.86.85H3.5l-.47.34-1 3.08L2 3zm10.13 10H2.19l1.67-5H7.5l.35-.15.86-.85h5.79l-2.37 6z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Load From File" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                            </Menu>
                            <TabControl Grid.Row="1">
                                <TabItem x:Name="TabItemSettingsMisc">
                                    <TabItem.Header>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="12"
                                            Text="Misc" />
                                    </TabItem.Header>
                                    <ScrollViewer>
                                        <Grid IsEnabled="{Binding !IsScanning}" RowDefinitions="Auto,Auto, *">
                                            <TextBlock
                                                Grid.Row="0"
                                                Margin="10"
                                                Foreground="{actipro:ThemeResource ControlBackgroundBrushSolidWarning}"
                                                Text="Hint: Mouse hover options to get more information about them" />
                                            <Grid Grid.Row="1" ColumnDefinitions="Auto, Auto, *">
                                                <StackPanel Margin="5,5,0,0">
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Ignore Read Only Folders"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IgnoreReadOnlyFolders}"
                                                        IsThreeState="False" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Include Sub Directories"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IncludeSubDirectories}"
                                                        IsThreeState="False" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Include Images"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IncludeImages}"
                                                        IsThreeState="False" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Generate Preview Images"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=GeneratePreviewThumbnails}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="Deactivate to save memory by disabling preview images of duplicates" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Exclude Reparse Points"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IgnoreReparsePoints}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="Symbolic links and junction only. Note this will completely skip these from file enumeration to search." />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Exclude Hard Links"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ExcludeHardLinks}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="Unlike reparse points hard links are still included in search but are not considered as duplicates. WARNING: Use this option only when necessary, as it slows down the scanning process considerably!" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Extended FFTools Logging"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ExtendedFFToolsLogging}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If activated ffmpeg and ffprobe errors will be written to the log" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Always retry failed sampling"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=AlwaysRetryFailedSampling}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If activated scan engine will try to generate thumbprints of failed entries each time it is run. Otherwise consecutive attempt will be taken only after cleanup of the database." />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Auto backup scan results"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=BackupAfterListChanged}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If activated a backup gets created each time the scan results list gets changed" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Use native Ffmpeg binding"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=UseNativeFfmpegBinding}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If activated it will call ffmpeg functions natively instead of spawning a new ffmpeg.exe process. This is MUCH(!!) faster. WARNING: You must use the latest SHARED and STABLE ffmpeg version. If something goes wrong then whole VDF will crash." />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Ignore Black Pixels"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IgnoreBlackPixels}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="Skip black pixels when comparing thumbnails. Lowers the chance for 'false positives' if thumbnails contain too much dark and raises the chance to detect duplicates if one of the thumbnails have black bars and the others not. In rare scenarios this might raise the 'false positives' instead. Slows down the scan speed by a bit." />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Ignore White Pixels"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IgnoreWhitePixels}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="Skip white pixels when comparing thumbnails. Lowers the chance for 'false positives' if thumbnails contain too much brightness and raises the chance to detect duplicates if one of the thumbnails have white bars and the others not. In rare scenarios this might raise the 'false positives' instead. Slows down the scan speed by a bit." />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Compare Horizontally Flipped"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=CompareHorizontallyFlipped}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="Select this option if your video collection might contain horizontally flipped videos and you want them to be detected reliably. Slows down the scan speed by a bit." />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Save results on exit"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=AskToSaveResultsOnExit}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If checked you will be asked if you want to save the results when you close VDF" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Scan against non-existing files"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=IncludeNonExistingFiles}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If checked non-existing files which have all necessary information are included" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Scan against entire database"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ScanAgainstEntireDatabase}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="If checked scan is also performed against your entire database unless database files are excluded otherwise (i.e. exclude list, file path must contain, etc)" />
                                                    <CheckBox
                                                        VerticalAlignment="Center"
                                                        Content="Use pHash instead of visual similarity"
                                                        IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=UsePHash}"
                                                        IsThreeState="False"
                                                        ToolTip.Tip="pHash = slower but more robust to re-encoding, resizing, contrast changes etc. Visual similarity = faster, also works on reencoded videos, watermarks etc but less robust. Ignored if you're using an old database with 16x16 graybyte values." />
                                                </StackPanel>
                                                <StackPanel Grid.Column="1" Margin="15,5,0,0">
                                                    <TextBlock VerticalAlignment="Center" Text="Percent:" />
                                                    <NumericUpDown
                                                        Width="200"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        FormatString="\{0\}%"
                                                        Increment="0.1"
                                                        Maximum="100"
                                                        Minimum="1"
                                                        ToolTip.Tip="Minimum percentage that thumbnails must match before they are considered duplicates"
                                                        Value="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=Percent}" />
                                                    <TextBlock VerticalAlignment="Center" Text="Duration Difference:" />
                                                    <NumericUpDown
                                                        Width="200"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        FormatString="\{0\}%"
                                                        Increment="0.1"
                                                        Maximum="100"
                                                        Minimum="0"
                                                        ToolTip.Tip="Only scan videos against each other where the duration is not bigger/smaller than X %"
                                                        Value="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=PercentDurationDifference}" />
                                                    <TextBlock
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Center"
                                                        Text="Thumbnails:" />
                                                    <NumericUpDown
                                                        Width="200"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Maximum="100"
                                                        Minimum="1"
                                                        ToolTip.Tip="Number of thumbnails generated per file. This only applies to video files. A high number means that the scan takes longer but also the chance of a 'false positive' decreases."
                                                        ValueChanged="Thumbnails_ValueChanged"
                                                        Value="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=Thumbnails}" />
                                                    <TextBlock
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Center"
                                                        Text="Max Degree Of Parallelism:" />
                                                    <NumericUpDown
                                                        Width="200"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Maximum="100"
                                                        Minimum="-1"
                                                        ToolTip.Tip="Limits the amount of concurrent tasks. A value of -1 leaves it up to the system to decide (takes full speed), a value of 1 is most stable (lets you interact with your system while scan runs in background). Maximum should be the amount of physical cores of your CPU."
                                                        Value="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=MaxDegreeOfParallelism}" />
                                                    <TextBlock VerticalAlignment="Center" Text="Custom FF Arguments:" />
                                                    <TextBox
                                                        VerticalAlignment="Center"
                                                        Text="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=CustomFFArguments}"
                                                        ToolTip.Tip="FF(mpeg/probe) arguments passed to the end of the internal arguments. Most users can leave this empty." />
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock
                                                            VerticalAlignment="Center"
                                                            FontSize="14"
                                                            Text="Hardware Acceleration:" />
                                                        <Button
                                                            Margin="10,0,0,0"
                                                            Classes="hyperlink"
                                                            Command="{Binding OpenHWInfoLinkCommand}"
                                                            Content="More Info" />
                                                    </StackPanel>
                                                    <ComboBox
                                                        x:Name="ComboboxHardwareAccelerationMode"
                                                        VerticalAlignment="Center"
                                                        ItemsSource="{Binding HardwareAccelerationModes}"
                                                        SelectedItem="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=HardwareAccelerationMode}"
                                                        ToolTip.Tip="Hardware acceleration mode of ffmpeg" />
                                                    <TextBlock
                                                        VerticalAlignment="Center"
                                                        FontSize="14"
                                                        Text="Custom Commands:" />
                                                    <ComboBox
                                                        VerticalAlignment="Center"
                                                        ItemsSource="{Binding CustomCommandList}"
                                                        SelectedItem="{Binding SelectedCustomCommand}"
                                                        ToolTip.Tip="Enter your own commands to open single or multiple files." />
                                                    <TextBox
                                                        VerticalAlignment="Center"
                                                        Text="{Binding SelectedCustomCommandValue}"
                                                        ToolTip.Tip="E.g.: 'nemo --tabs %f', where '%f' is the placeholder for the file(s)" />
                                                    <TextBlock
                                                        VerticalAlignment="Center"
                                                        FontSize="14"
                                                        Text="Custom Database Folder:" />
                                                    <TextBox
                                                        VerticalAlignment="Center"
                                                        Text="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=CustomDatabaseFolder}"
                                                        ToolTip.Tip="Specify a custom database folder. Otherwise it uses the current VDF folder." />
                                                </StackPanel>
                                            </Grid>
                                            <Grid
                                                Grid.Row="2"
                                                Margin="0,10,5,0"
                                                ColumnDefinitions="*, *"
                                                RowDefinitions="Auto, 300">
                                                <TextBlock
                                                    Margin="5,0,0,2"
                                                    FontWeight="Bold"
                                                    Text="Search Directories" />
                                                <Grid Grid.Row="1" RowDefinitions="Auto, *, Auto">
                                                    <Menu Grid.Row="0" MinHeight="30">
                                                        <MenuItem Command="{Binding AddIncludesToListCommand}">
                                                            <MenuItem.Header>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Viewbox Width="16" Height="16">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Data="M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16 12.75H12.75V16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16V12.75H8C7.59 12.75 7.25 12.41 7.25 12C7.25 11.59 7.59 11.25 8 11.25H11.25V8C11.25 7.59 11.59 7.25 12 7.25C12.41 7.25 12.75 7.59 12.75 8V11.25H16C16.41 11.25 16.75 11.59 16.75 12C16.75 12.41 16.41 12.75 16 12.75Z" Fill="LimeGreen" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                    <TextBlock
                                                                        Margin="5,0,0,0"
                                                                        VerticalAlignment="Center"
                                                                        Text="Add" />
                                                                </StackPanel>
                                                            </MenuItem.Header>
                                                        </MenuItem>
                                                        <MenuItem Command="{Binding RemoveIncludesFromListCommand}" CommandParameter="{Binding ElementName=ListboxIncludelist}">
                                                            <MenuItem.Header>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Viewbox Width="16" Height="16">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Data="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7 13H17V11H7V13Z" Fill="Red" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                    <TextBlock
                                                                        Margin="5,0,0,0"
                                                                        VerticalAlignment="Center"
                                                                        Text="Remove" />
                                                                </StackPanel>
                                                            </MenuItem.Header>
                                                        </MenuItem>
                                                        <MenuItem Command="{Binding ClearIncludesListCommand}">
                                                            <MenuItem.Header>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Viewbox Width="16" Height="16">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Data="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7 13H17V11H7V13Z" Fill="Red" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                    <TextBlock
                                                                        Margin="5,0,0,0"
                                                                        VerticalAlignment="Center"
                                                                        Text="Clear All" />
                                                                </StackPanel>
                                                            </MenuItem.Header>
                                                        </MenuItem>
                                                    </Menu>
                                                    <ListBox
                                                        Name="ListboxIncludelist"
                                                        Grid.Row="1"
                                                        BorderThickness="1"
                                                        DragDrop.AllowDrop="True"
                                                        ItemsSource="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=Includes}" />
                                                    <TextBlock
                                                        Grid.Row="2"
                                                        Margin="5"
                                                        Foreground="{actipro:ThemeResource ControlBackgroundBrushSolidWarning}"
                                                        Text="Hint: You can also add folders with drag &amp; drop" />
                                                </Grid>
                                                <TextBlock
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    Margin="15,0,0,2"
                                                    FontWeight="Bold"
                                                    Text="Exclude Directories" />
                                                <Grid
                                                    Grid.Row="1"
                                                    Grid.Column="1"
                                                    Margin="10,0,0,0"
                                                    RowDefinitions="Auto, *, Auto">
                                                    <Menu Grid.Row="0" MinHeight="30">
                                                        <MenuItem Command="{Binding AddBlacklistToListCommand}">
                                                            <MenuItem.Header>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Viewbox Width="16" Height="16">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Data="M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16 12.75H12.75V16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16V12.75H8C7.59 12.75 7.25 12.41 7.25 12C7.25 11.59 7.59 11.25 8 11.25H11.25V8C11.25 7.59 11.59 7.25 12 7.25C12.41 7.25 12.75 7.59 12.75 8V11.25H16C16.41 11.25 16.75 11.59 16.75 12C16.75 12.41 16.41 12.75 16 12.75Z" Fill="LimeGreen" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                    <TextBlock
                                                                        Margin="5,0,0,0"
                                                                        VerticalAlignment="Center"
                                                                        Text="Add" />
                                                                </StackPanel>
                                                            </MenuItem.Header>
                                                        </MenuItem>
                                                        <MenuItem Command="{Binding RemoveBlacklistFromListCommand}" CommandParameter="{Binding ElementName=ListboxBlacklist}">
                                                            <MenuItem.Header>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Viewbox Width="16" Height="16">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Data="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7 13H17V11H7V13Z" Fill="Red" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                    <TextBlock
                                                                        Margin="5,0,0,0"
                                                                        VerticalAlignment="Center"
                                                                        Text="Remove" />
                                                                </StackPanel>
                                                            </MenuItem.Header>
                                                        </MenuItem>
                                                        <MenuItem Command="{Binding ClearBlacklistListCommand}">
                                                            <MenuItem.Header>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Viewbox Width="16" Height="16">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Data="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7 13H17V11H7V13Z" Fill="Red" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                    <TextBlock
                                                                        Margin="5,0,0,0"
                                                                        VerticalAlignment="Center"
                                                                        Text="Clear All" />
                                                                </StackPanel>
                                                            </MenuItem.Header>
                                                        </MenuItem>
                                                    </Menu>
                                                    <ListBox
                                                        Name="ListboxBlacklist"
                                                        Grid.Row="1"
                                                        BorderThickness="1"
                                                        DragDrop.AllowDrop="True"
                                                        ItemsSource="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=Blacklists}" />
                                                    <TextBlock
                                                        Grid.Row="2"
                                                        Margin="5"
                                                        Foreground="{actipro:ThemeResource ControlBackgroundBrushSolidWarning}"
                                                        Text="Hint: You can also add folders with drag &amp; drop" />
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </ScrollViewer>
                                </TabItem>
                                <TabItem x:Name="TabItemSettingsFiles">
                                    <TabItem.Header>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="12"
                                            Text="Files" />
                                    </TabItem.Header>
                                    <Grid
                                        ColumnDefinitions="Auto, Auto, Auto, Auto, *"
                                        IsEnabled="{Binding !IsScanning}"
                                        RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,*">
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.ColumnSpan="4"
                                            Margin="10"
                                            Foreground="{actipro:ThemeResource ControlBackgroundBrushEmphasizedDanger}"
                                            Text="Note: These settings apply when files are added to database, not when comparing files against duplicates" />
                                        <CheckBox
                                            x:Name="CheckboxFilterByFileSize"
                                            Grid.Row="1"
                                            Grid.Column="0"
                                            VerticalAlignment="Center"
                                            Content="File Size (MB):"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=FilterByFileSize}"
                                            IsThreeState="False" />
                                        <NumericUpDown
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Width="200"
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            IsEnabled="{Binding #CheckboxFilterByFileSize.IsChecked}"
                                            Minimum="0"
                                            Value="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=MinimumFileSize}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Grid.Column="2"
                                            Margin="10,0"
                                            VerticalAlignment="Center"
                                            Text="to" />
                                        <NumericUpDown
                                            Grid.Row="1"
                                            Grid.Column="3"
                                            Width="200"
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            IsEnabled="{Binding #CheckboxFilterByFileSize.IsChecked}"
                                            Minimum="0"
                                            Value="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=MaximumFileSize}" />
                                        <CheckBox
                                            x:Name="CheckboxFilterByFilePathContains"
                                            Grid.Row="2"
                                            Grid.Column="0"
                                            VerticalAlignment="Top"
                                            Content="File Path contains:"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=FilterByFilePathContains}"
                                            IsThreeState="False" />
                                        <Grid
                                            Grid.Row="2"
                                            Grid.Column="1"
                                            Grid.ColumnSpan="3"
                                            RowDefinitions="Auto, *, Auto">
                                            <Menu
                                                Grid.Row="0"
                                                MinHeight="30"
                                                IsEnabled="{Binding #CheckboxFilterByFilePathContains.IsChecked}">
                                                <MenuItem Command="{Binding AddFilePathContainsTextToListCommand}">
                                                    <MenuItem.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Viewbox Width="16" Height="16">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Data="M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16 12.75H12.75V16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16V12.75H8C7.59 12.75 7.25 12.41 7.25 12C7.25 11.59 7.59 11.25 8 11.25H11.25V8C11.25 7.59 11.59 7.25 12 7.25C12.41 7.25 12.75 7.59 12.75 8V11.25H16C16.41 11.25 16.75 11.59 16.75 12C16.75 12.41 16.41 12.75 16 12.75Z" Fill="LimeGreen" />
                                                                </Canvas>
                                                            </Viewbox>
                                                            <TextBlock
                                                                Margin="5,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="Add" />
                                                        </StackPanel>
                                                    </MenuItem.Header>
                                                </MenuItem>
                                                <MenuItem Command="{Binding RemoveFilePathContainsTextFromListCommand}" CommandParameter="{Binding ElementName=ListboxFilePathContainsText}">
                                                    <MenuItem.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Viewbox Width="16" Height="16">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Data="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7 13H17V11H7V13Z" Fill="Red" />
                                                                </Canvas>
                                                            </Viewbox>
                                                            <TextBlock
                                                                Margin="5,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="Remove" />
                                                        </StackPanel>
                                                    </MenuItem.Header>
                                                </MenuItem>
                                            </Menu>
                                            <ListBox
                                                Name="ListboxFilePathContainsText"
                                                Grid.Row="1"
                                                MinHeight="70"
                                                BorderThickness="1"
                                                IsEnabled="{Binding #CheckboxFilterByFilePathContains.IsChecked}"
                                                ItemsSource="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=FilePathContainsTexts}" />
                                            <TextBlock
                                                Grid.Row="2"
                                                Foreground="{actipro:ThemeResource ControlBackgroundBrushSolidWarning}"
                                                Text="Note: Supports the following wildcards: '*' and '?'. The backslash character '\' escapes." />
                                        </Grid>
                                        <CheckBox
                                            x:Name="CheckboxFilterByFilePathNotContains"
                                            Grid.Row="3"
                                            Grid.Column="0"
                                            VerticalAlignment="Top"
                                            Content="File Path does NOT contain:"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=FilterByFilePathNotContains}"
                                            IsThreeState="False" />
                                        <Grid
                                            Grid.Row="3"
                                            Grid.Column="1"
                                            Grid.ColumnSpan="3"
                                            RowDefinitions="Auto, *, Auto">
                                            <Menu
                                                Grid.Row="0"
                                                MinHeight="30"
                                                IsEnabled="{Binding #CheckboxFilterByFilePathNotContains.IsChecked}">
                                                <MenuItem Command="{Binding AddFilePathNotContainsTextToListCommand}">
                                                    <MenuItem.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Viewbox Width="16" Height="16">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Data="M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16 12.75H12.75V16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16V12.75H8C7.59 12.75 7.25 12.41 7.25 12C7.25 11.59 7.59 11.25 8 11.25H11.25V8C11.25 7.59 11.59 7.25 12 7.25C12.41 7.25 12.75 7.59 12.75 8V11.25H16C16.41 11.25 16.75 11.59 16.75 12C16.75 12.41 16.41 12.75 16 12.75Z" Fill="LimeGreen" />
                                                                </Canvas>
                                                            </Viewbox>
                                                            <TextBlock
                                                                Margin="5,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="Add" />
                                                        </StackPanel>
                                                    </MenuItem.Header>
                                                </MenuItem>
                                                <MenuItem Command="{Binding RemoveFilePathNotContainsTextFromListCommand}" CommandParameter="{Binding ElementName=ListboxFilePathNotContainsText}">
                                                    <MenuItem.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Viewbox Width="16" Height="16">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Data="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7 13H17V11H7V13Z" Fill="Red" />
                                                                </Canvas>
                                                            </Viewbox>
                                                            <TextBlock
                                                                Margin="5,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="Remove" />
                                                        </StackPanel>
                                                    </MenuItem.Header>
                                                </MenuItem>
                                            </Menu>
                                            <ListBox
                                                Name="ListboxFilePathNotContainsText"
                                                Grid.Row="1"
                                                MinHeight="70"
                                                BorderThickness="1"
                                                IsEnabled="{Binding #CheckboxFilterByFilePathNotContains.IsChecked}"
                                                ItemsSource="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=FilePathNotContainsTexts}" />
                                            <TextBlock
                                                Grid.Row="2"
                                                Foreground="{actipro:ThemeResource ControlBackgroundBrushSolidWarning}"
                                                Text="Note: Supports the following wildcards: '*' and '?'. The backslash character '\' escapes." />
                                        </Grid>
                                    </Grid>
                                </TabItem>
                                <TabItem>
                                    <TabItem.Header>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="12"
                                            Text="Appearance" />
                                    </TabItem.Header>
                                    <StackPanel>
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Use Mica (Windows 11 only)"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=UseMica}"
                                            IsThreeState="False" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Dark Mode"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=DarkMode}"
                                            IsThreeState="False" />
                                        <TextBlock
                                            Margin="0,5,0,5"
                                            VerticalAlignment="Center"
                                            Foreground="{actipro:ThemeResource ControlBackgroundBrushSolidWarning}"
                                            Text=" Restart VDF to apply changes" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Show Thumbnail Column"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ShowThumbnailColumn}"
                                            IsThreeState="False" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Show Path Column"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ShowPathColumn}"
                                            IsThreeState="False" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Show Duration Column"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ShowDurationColumn}"
                                            IsThreeState="False" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Show Format Column"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ShowFormatColumn}"
                                            IsThreeState="False" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Show Audio Column"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ShowAudioColumn}"
                                            IsThreeState="False" />
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            Content="Show Similarity Column"
                                            IsChecked="{Binding Source={x:Static Settings:SettingsFile.Instance}, Path=ShowSimilarityColumn}"
                                            IsThreeState="False" />
                                    </StackPanel>
                                </TabItem>
                            </TabControl>
                        </Grid>
                    </TabItem>
                    <TabItem Name="TabItemLog">
                        <TabItem.Header>
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="12"
                                Text="Log" />
                        </TabItem.Header>
                        <Grid Margin="0,0,0,10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Menu Grid.Row="0" MinHeight="30">
                                <MenuItem Command="{Binding ClearLogCommand}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="1024" Height="1024">
                                                    <Path Data="M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390z m468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Clear" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Command="{Binding SaveLogCommand}">
                                    <MenuItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <Viewbox Width="20" Height="20">
                                                <Canvas Width="16" Height="16">
                                                    <Path Data="M11.04 1.33L12.71 3l.29.71v.33h-.5l-.5.5v-.83l-1.67-1.67H10v4H4v-4H2v10h3l-.5 1H2l-1-1v-10l1-1h8.33l.71.29zM7 5h2V2H7v3zm6.5 0L15 6.5l-.02.69-5.5 5.5-.13.12-.37.37-.1.09-3 1.5-.67-.67 1.5-3 .09-.1.37-.37.12-.13 5.5-5.5h.71zm-6.22 7.24l-.52 1 1.04-.48-.52-.52zm.69-1.03l.79.79 5.15-5.15-.79-.79-5.15 5.15z" Fill="{actipro:ThemeResource ButtonForegroundBrush}" />
                                                </Canvas>
                                            </Viewbox>
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="Save To File" />
                                        </StackPanel>
                                    </MenuItem.Header>
                                </MenuItem>
                            </Menu>
                            <ListBox
                                Grid.Row="1"
                                MinHeight="70"
                                Margin="5"
                                ItemsSource="{Binding LogItems}"
                                ScrollViewer.HorizontalScrollBarVisibility="Visible" />
                        </Grid>
                    </TabItem>
                </TabControl>
                <Grid
                    x:Name="BusyIndicator"
                    IsVisible="{Binding IsBusy}"
                    Opacity="0.8">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <ProgressBar
                            Height="10"
                            MaxWidth="200"
                            BorderBrush="LimeGreen"
                            BorderThickness="1"
                            IsIndeterminate="{Binding IsBusy}" />
                        <TextBlock
                            Margin="0,10,0,0"
                            HorizontalAlignment="Center"
                            FontSize="14"
                            FontWeight="ExtraBold"
                            Text="Please Wait" />
                        <TextBlock
                            Name="LblBusyIndicator"
                            Margin="0,10,0,0"
                            HorizontalAlignment="Center"
                            FontSize="14"
                            Text="{Binding IsBusyOverlayText}" />
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </Border>


</Window>
